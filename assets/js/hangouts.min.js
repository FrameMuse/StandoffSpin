String.prototype.intConvert=function(){return parseInt(this,10)},String.prototype.num_split=function(){for(var a=[],b=this.toString(),c=b.length,d=0;d<c;d++)a.push(+b.charAt(d));return a},$.fn.extend({toggleText:function(c,a=null){return this.html(this.html()==a?c:a)},num_split:function(){for(var a=[],b=this.text().toString(),c=b.length,d=0;d<c;d++)a.push(+b.charAt(d));return a}}),$(".faq__summary").click(function(){$(this).parent().toggleClass("faq__clause--deployed")}),$(".tab-swithcer__button").click(function(){$(".tab-swithcer__button").removeClass("tab-swithcer__button--active");var a=$(this).addClass("tab-swithcer__button--active").attr("tab");$("[class *= 'js-tab-']").addClass("hidden"),$("[class *= 'js-tab-"+a+"']").removeClass("hidden")});class features_lang{constructor(){this.tap="rus",this.onclick=function(){},this.path="/assets/img/icons/";this;$(".js-option-lang").click(()=>{var a=this.toggleTap("rus","eng");$(".topbar-language__icon").css({"background-image":this.path+a}),$(".topbar-language__text").html(a),this.onclick(a)})}toggleTap(c,a=null){return this.tap=this.tap==a?c:a}}class features_sound{constructor(){this.tap="on",this.onclick=function(){};const a=this;$(".js-option-volume").click(function(){$(this).find(".stndfspin-features__icon").toggleClass("stndfspin-button--unfilled").toggleClass("stndfspin-features__icon--green").parent().find(".stndfspin-features__column > span").toggleText("\u0412\u043A\u043B.","\u0412\u044B\u043A\u043B."),a.onclick(a.toggleTap("on","off"))})}toggleTap(c,a=null){return this.tap=this.tap==a?c:a}}class features_timer{constructor(){this.data={numbers:{seconds:0,minutes:0,hours:0}}}counts(a=""){return $(".timer-v2__count[data-count='"+a+"']").find("span")}async initiate(a={},b=1){return this.data.numbers=a,this.promise=new Promise(c=>{var d=setInterval(()=>{if(this.single_discount("seconds",59)&&this.single_discount("minutes",59)&&this.single_discount("hours",24))return clearInterval(d),void c();for(const b in a)this.counts(b).each(function(c){$(this).html(num_split(a[b],2)[c])})},1e3/b)}),await this.promise}single_discount(a="",b=0){return!(null!=this.data.numbers[a])||(0>=this.data.numbers[a]?(this.data.numbers[a]=b,!0):void this.data.numbers[a]--)}}class features_wheel{init(){var a={};$(".fortune__circle > *").each(function(b,c){a[b]=$(c)}),this.reopen={onclick:function(){}},this.data={points:a,spins:4,animation:$(".fortune__circle").css("transition"),duration:14},this.count(18),$(".js-wheel-reopen").click(()=>{$(".fortune__circle, .fortune-wheel__inner, .fortune-wheel__curve-1, .fortune-wheel__curve-2").toggleClass("hidden"),$(".fortune-wheel").removeClass("fortune-wheel--without-after"),this.reopen.onclick()})}getRotationDegrees(c){var d=c.css("-webkit-transform")||c.css("-moz-transform")||c.css("-ms-transform")||c.css("-o-transform")||c.css("transform");if("none"!==d)var e=d.split("(")[1].split(")")[0].split(","),f=e[0],a=e[1],b=Math.round(Math.atan2(a,f)*(180/Math.PI));else var b=0;return 0>b?b+360:b}spinTo(a){var b=this.data.points[a],c=360*this.data.spins-this.getRotationDegrees(b);return $(".fortune__circle").css({transform:"",transition:"unset",animation:"unset"}),setTimeout(()=>{$(".fortune__circle").css({transform:"rotate("+c+"deg)",transition:this.data.animation})},200),b}checkUp(a){return this.promise=new Promise(b=>{setTimeout(()=>{var c=setInterval(()=>{if(360==this.getRotationDegrees(a)+this.getRotationDegrees($(".fortune__circle")))return clearInterval(c),void b()},500)},1e3*this.data.duration)})}async win(a={}){var b=this.spinTo(a.id);return setTimeout(()=>{b.find(".weapon-skins__image").attr({src:a.skin.image}),b.find(".sorted-skins__skin-title").html(a.skin.title)},3e3),await this.checkUp(b),$(".fortune__circle, .fortune-wheel__inner, .fortune-wheel__curve-1, .fortune-wheel__curve-2").toggleClass("hidden"),$(".fortune-wheel").addClass("fortune-wheel--without-after"),this.promise}count(a){var b=+$(".fortune__item").css("height").replace("px","");console.log("You have "+a+" block in it"),console.log("Each block has "+360/a+" degrees"),console.log("Each block has "+114/(360/a)+" ratio"),console.log("Each block width is "+b/(114/(360/a))+"px"),$(".fortune__item").each(function(b){$(this).css("transform","rotate("+360/a*b+"deg) translateY(var(--wheel-indent))")})}}class features_popup{constructor(){this.html=`<div class="popup" hidden="hidden"><div class="popup__cover"></div><div class="popup-window scale-out"><div class="popup-window__close">✖</div><div class="popup-window__article"><span class="popup-window__title"></span><span class="popup-window__summary"></span></div><div class="popup-window__content"></div><div class="popup-window__help">Есть вопросы? Пишите в <a href="https://vk.com/standoffroll" classname="popup-window__marked">группу поддержки VK</a></div></div></div>`,this.on=function(){},this.default()}default(){0==$(".popup").length&&$("body").append(this.html),$(".popup-window__close, .popup__cover").click(function(){var a=$(".popup");a.find(".popup-window").removeClass("scale-out scale-in").addClass("scale-out"),setTimeout(()=>a.attr("hidden",""),200)})}tend(a){return $(".popup-window__"+a)}wEdit(a={}){for(var b in a)this.tend(b).html(a[b])}open(a,b={}){this.wText=function(b){return getLanguage("popup."+a+"."+b)},this.title=this.wText("title"),this.summary=this.wText("summary"),this.wEdit({title:null,summary:null,content:null,help:getLanguage("popup.help.html")}),this.on(a,b),$(".popup").removeAttr("hidden"),setTimeout(()=>$(".popup-window").removeClass("scale-out scale-in").addClass("scale-in"),50)}close(){$(".popup-window__close, .popup__cover").click()}}class features_referal{init(){this.name=name,this.default(),this.progress_block="<div class=\"goal__line\"><div class=\"goal__line--line-progress\"></div><div class=\"goal__counter\"><span class=\"goal__counter--icon\"></span><span class=\"goal__counter--amount\"></span></div></div>",this.commit_progress(2,89)}default(){this.goals_number=$(".goal").length,this.width=$(this.name).outerWidth(),this.goal_width=$(".goal").outerWidth(),this.goal_height=$(".goal__image").outerHeight(),this.goal_indent=$(".goal[data-goal-id='2']").css("margin-left").replace("px","").intConvert(),this.goal_image=$(".goal__image").outerWidth(),this.goal_goal_height=$(".goal__goal").outerHeight()}create_progress_block(){return 1>=this.goals_number?void console.error("Too few elements at the page ("+this.goals_number+")"):void $(this.name).append(this.progress_block)}create_goal(a,b,c,d,e=""){if(e)var e="goal__reached";var f="<div class=\"goal "+e+"\" data-goal-id=\""+this.goals_number+"\"><div class=\"goal__goal\">"+a+"</div><div class=\"goal__image\"><img class=\"goal__image--image\" src=\""+c+"\"></div><div class=\"goal__level\">"+b+"</div><div class=\"goal__rewards\">"+d+"</div>";return this.goals_number++,f}add_goal(a){var b=this.create_goal(a.goal,a.level,a.image,a.rewards,a.reached);$(this.name).append(b)}get_progress(a,b){var c=this.goal_width+this.goal_indent,b=b/100,d=c*a-c+this.goal_width+c*b-c;return d}commit_progress(a,b,c){var d=this.get_progress(a,b);return d>this.width?(console.log(d),console.error("Commited line is too big for '"+this.name+"'"),d+"px"):(0>d&&(d=0),1>=this.goals_number?void console.error("Too few elements at the page ("+this.goals_number+")"):void(70<=b&&100>=b||30<=b&&2>=b?$(".goal__counter").addClass("hidden"):$(".goal__counter").removeClass("hidden"),c&&$(".goal__counter--amount").html(c),$(".goal__line--line-progress").css("width",d+"px"),$(".goal__counter").css("left",d-$(".goal__counter").outerWidth()/2+"px"),$(".goal__line").css("top",this.goal_image_indent+this.goal_goal_height+this.goal_height/2+"px")))}}const features=new class{constructor(){this.sound=new features_sound,this.lang=new features_lang,this.timer=new features_timer,this.wheel=new features_wheel,this.popup=new features_popup,this.referal=new features_referal}};function num_split(a=0,b=0){for(var c=a.toString(),d=c.length,b=d>=b?0:b-d,e=Array(b).fill(0),f=0;f<d;f++)e.push(+c.charAt(f));return e}function getLanguage(...a){return console.log(...a),"jopa"}